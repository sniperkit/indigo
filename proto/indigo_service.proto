syntax = "proto3";

package proto;

service Indigo {
    rpc CreateIndex(CreateIndexRequest) returns (CreateIndexResponse) {}
    rpc DeleteIndex(DeleteIndexRequest) returns (DeleteIndexResponse) {}
    rpc GetStats(GetStatsRequest) returns (GetStatsResponse) {}
    rpc GetMapping(GetMappingRequest) returns (GetMappingResponse) {}
    rpc IndexDocument(IndexDocumentRequest) returns (IndexDocumentResponse) {}
    rpc DeleteDocument(DeleteDocumentRequest) returns (DeleteDocumentResponse) {}
    rpc IndexBulk(IndexBulkRequest) returns (IndexBulkResponse) {}
    rpc DeleteBulk(DeleteBulkRequest) returns (DeleteBulkResponse) {}
    rpc SearchDocuments(SearchDocumentsRequest) returns (SearchDocumentsResponse) {}
}

message CreateIndexRequest {
    string name = 1;
    bytes mapping = 2;
    string type = 3;
    string store = 4;
}
message CreateIndexResponse {
    string name = 1;
}

message DeleteIndexRequest {
    string name = 1;
}
message DeleteIndexResponse {
    string name = 1;
}

message GetStatsRequest {
    string name = 1;
}
message GetStatsResponse {
    bytes stats = 1;
}

message GetMappingRequest {
    string name = 1;
}
message GetMappingResponse {
    bytes mapping = 1;
}

message IndexDocumentRequest {
    string name = 1;
    string id = 2;
    bytes document = 3;
}
message IndexDocumentResponse {
    int32 count = 1;
}

message DeleteDocumentRequest {
    string name = 1;
    string id = 2;
}
message DeleteDocumentResponse {
    int32 count = 1;
}

message IndexBulkRequest {
    string name = 1;
    bytes documents = 2;
    int32 batchSize = 3;
}
message IndexBulkResponse {
    int32 count = 1;
}

message DeleteBulkRequest {
    string name = 1;
    bytes ids = 2;
    int32 batchSize = 3;
}
message DeleteBulkResponse {
    int32 count = 1;
}

message SearchDocumentsRequest {
    string name = 1;
    bytes searchRequest = 2;
}
message SearchDocumentsResponse {
    bytes searchResult = 1;
}

syntax = "proto3";

package proto;

service Indigo {
    rpc CreateIndex(CreateIndexRequest) returns (CreateIndexResponse) {}
    rpc DeleteIndex(DeleteIndexRequest) returns (DeleteIndexResponse) {}

    rpc GetStats(GetStatsRequest) returns (GetStatsResponse) {}
    rpc GetMapping(GetMappingRequest) returns (GetMappingResponse) {}

    rpc PutDocument(PutDocumentRequest) returns (PutDocumentResponse) {}
    rpc GetDocument(GetDocumentRequest) returns (GetDocumentResponse) {}
    rpc DeleteDocument(DeleteDocumentRequest) returns (DeleteDocumentResponse) {}

    rpc Bulk(BulkRequest) returns (BulkResponse) {}

    rpc Search(SearchRequest) returns (SearchResponse) {}
}

message CreateIndexRequest {
    string indexName = 1;
    bytes indexMapping = 2;
    string indexType = 3;
    string indexStore = 4;
    bytes kvConfig = 5;
}
message CreateIndexResponse {
    string indexName = 1;
}

message DeleteIndexRequest {
    string indexName = 1;
}
message DeleteIndexResponse {
    string indexName = 1;
}


message GetStatsRequest {
    string indexName = 1;
}
message GetStatsResponse {
    bytes indexStats = 1;
}

message GetMappingRequest {
    string indexName = 1;
}
message GetMappingResponse {
    bytes indexMapping = 1;
}


message PutDocumentRequest {
    string indexName = 1;
    string documentID = 2;
    bytes document = 3;
}
message PutDocumentResponse {
    int32 putCount = 1;
    int32 putErrorCount = 2;
}

message GetDocumentRequest {
    string indexName = 1;
    string documentID = 2;
}
message GetDocumentResponse {
    bytes document = 1;
}

message DeleteDocumentRequest {
    string indexName = 1;
    string documentID = 2;
}
message DeleteDocumentResponse {
    int32 deleteCount = 1;
}


message BulkRequest {
    string indexName = 1;
    bytes bulkRequest = 2;
    int32 batchSize = 3;
}
message BulkResponse {
    int32 putCount = 1;
    int32 putErrorCount = 2;
    int32 deleteCount = 3;
}


message SearchRequest {
    string indexName = 1;
    bytes searchRequest = 2;
}
message SearchResponse {
    bytes searchResult = 1;
}
